<!DOCTYPE html>
<html lang="en">

<head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="./calculator.component.css" rel="stylesheet" type="text/css" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
                integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
                crossorigin="anonymous" />
        <!-- Required CDN's -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.js"></script>
        <title>32-Exercise 8</title>
</head>


<body>
        <div class="container">
                <div class="d-flex flex-column min-vh-100 justify-content-center align-items-center col-12 bs-body-bg ">
                        <div class="row g-0 col-4 shadow-sm">
                                <!-- Campos de resultados -->
                                <input class="form-control bg-white  my-input fs-2 text-end font-custom1" type="text" id="calc_exp"
                                        value="0" disabled />
                                <input class="form-control bg-white my-input fs-3  text-end font-custom1" type="text"
                                        id="calc_result" value="0" disabled />

                                <div class="col g-0 col-md-8">
                                        <table class="table table-borderless g-0">
                                                <tr>
                                                        <td scope="col" class="col-2 calc">
                                                                <button type="button"
                                                                        class="form-control btn calc btn-lg text-light op fs-3"
                                                                        id="button9">9</button>
                                                        </td>
                                                        <td scope="col" class="col-2 calc">
                                                                <button type="button"
                                                                        class="form-control btn calc btn-lg text-light op fs-3"
                                                                        id="button8">8</button>
                                                        </td>
                                                        <td scope="col" class="col-2 calc">
                                                                <button type="button"
                                                                        class="form-control btn calc btn-lg text-light op fs-3"
                                                                        id="button7">7</button>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td scope="col" class="col-2 calc">
                                                                <button type="button"
                                                                        class="form-control btn calc btn-lg text-light op fs-3"
                                                                        id="button6">6</button>
                                                        </td>
                                                        <td scope="col" class="col-2 calc">
                                                                <button type="button"
                                                                        class="form-control btn calc btn-lg text-light op fs-3"
                                                                        id="button5">5</button>
                                                        </td>
                                                        <td scope="col" class="col-2 calc">
                                                                <button type="button"
                                                                        class="form-control btn calc btn-lg text-light op fs-3"
                                                                        id="button4">4</button>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td scope="col" class="col-2 calc">
                                                                <button type="button"
                                                                        class="form-control btn calc btn-lg text-light op fs-3"
                                                                        id="button6">3</button>
                                                        </td>
                                                        <td scope="col" class="col-2 calc">
                                                                <button type="button"
                                                                        class="form-control btn calc btn-lg text-light op fs-3"
                                                                        id="button5">2</button>
                                                        </td>
                                                        <td scope="col" class="col-2 calc">
                                                                <button type="button"
                                                                        class="form-control btn calc btn-lg text-light op fs-3"
                                                                        id="button4">1</button>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td scope="col" class="col-2 calc">
                                                                <button type="button"
                                                                        class="form-control btn calc btn-lg text-light op fs-3"
                                                                        id="button6">.</button>
                                                        </td>
                                                        <td scope="col" class="col-2 calc">
                                                                <button type="button"
                                                                        class="form-control btn calc btn-lg text-light op fs-3"
                                                                        id="button0">0</button>
                                                        </td>
                                                        <td scope="col" class="col-2 calc">
                                                                <button type="button"
                                                                        class="form-control btn calc btn-lg text-light op fs-3"
                                                                        id="button00">00</button>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td scope="col" class="col-2 calc">
                                                                <button class="form-control btn calc"></button>
                                                        </td>
                                                        <td scope="col" class="col-2 calc">
                                                                <button class="form-control btn calc"></button>
                                                        </td>
                                                        <td scope="col" class="col-2 calc">
                                                                <button class="form-control btn calc"></button>
                                                        </td>
                                                </tr>


                                        </table>
                                </div>
                                <div class="col-md-4">
                                        <div class="calc-o">
                                                <button type="button" class="form-control btn calc-o text-light fs-3"
                                                        id="buttondel">DEL</button>
                                        </div>
                                        <div scope="col" class="calc-o">
                                                <button type="button"
                                                        class="form-control btn calc-o text-light op operacion fs-3"
                                                        id="buttondiv">/</button>
                                        </div>
                                        <div scope="col" class="calc-o">
                                                <button type="button"
                                                        class="form-control btn calc-o text-light op operacion fs-3"
                                                        id="buttonmul">*</button>
                                        </div>
                                        <div scope="col" class="calc-o">
                                                <button type="button"
                                                        class="form-control btn calc-o text-light op operacion fs-3"
                                                        id="buttonmin">-</button>
                                        </div>
                                        <div scope="col" class="calc-o">
                                                <button type="button"
                                                        class="form-control btn calc-o text-light op operacion fs-3"
                                                        id="buttonsum">+</button>
                                        </div>
                                        <div scope="col" class="calc-o">
                                                <button type="button"
                                                        class="form-control btn calc-o text-light operacion op fs-3"
                                                        id="buttonigual">=</button>
                                        </div>
                                </div>
                        </div>
                </div>
        </div>
</body>
<script>

        $(document).ready(function () {

                //Añadir la expresion de la calculadora
                $(".op").click(function () {

                        $(".op").blur();

                        if (!$(this).hasClass(".operacion")) {
                                if ($("#calc_exp").val() == 0) {
                                        $("#calc_exp").val($(this).text());
                                }
                                else {
                                        $("#calc_exp").val($("#calc_exp").val() + $(this).text());
                                }
                        }
                });

                //DELETE
                $('#buttondel').click(function () {
                        $(".op").blur();

                        var value = $("#calc_exp").val();
                        if (!(parseInt(parseFloat(value)) == 0 && value.length == 1))
                                $("#calc_exp").val(value.slice(0, value.length - 1));
                        if (value.length == 1)
                                $("#calc_exp").val("0");
                });
        });

        // Limpiar la expresion
        $("#allClear").click(function () {
                $(".op").blur();

                $("#calc_exp").val("0");
                $("#buttondel").val("0");
        });

        //Igual
        $("#buttonigual").click(function () {
                $(".op").blur();
                var result;

                //Chequear
                try {
                        result = (eval(($("#calc_exp").val())));
                } catch (e) {
                        if (e instanceof SyntaxError) {
                                alert("Error: valores incorrectos");
                                $("#calc_exp").val("0");
                                $("#calc_result").val("0");
                        }
                        if (e instanceof TypeError) {
                                alert("Error: valores incorrectos");
                                $("#calc_exp").val("0");
                                $("#calc_result").val("0");
                        }
                }

                // Append if the result is correct
                $("#calc_result").val(result);
                $("#calc_exp").val("0");
        });
</script>

</html>
